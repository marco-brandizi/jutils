<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) on Thu Mar 14 23:54:19 UTC 2024 -->
<title>BatchService (JUtils - Miscellanea of Java Utils 14.1-SNAPSHOT API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2024-03-14">
<meta name="description" content="declaration: package: uk.ac.ebi.utils.threading, class: BatchService">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/BatchService.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">uk.ac.ebi.utils.threading</a></div>
<h1 title="Class BatchService" class="title">Class BatchService&lt;TK extends <a href="BatchServiceTask.html" title="class in uk.ac.ebi.utils.threading">BatchServiceTask</a>&gt;</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">uk.ac.ebi.utils.threading.BatchService&lt;TK&gt;</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">BatchService&lt;TK extends <a href="BatchServiceTask.html" title="class in uk.ac.ebi.utils.threading">BatchServiceTask</a>&gt;</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block"><p>A pool-based thread execution service, that dynamically optimises its size.</p>
 
 <p>This is a base class that allow you to manage the execution of a number of <a href="BatchServiceTask.html" title="class in uk.ac.ebi.utils.threading"><code>tasks</code></a> in parallel.
 This is achieved by means of a thread pool, which of size is dynamically adjusted via <a href="PoolSizeTuner.html" title="class in uk.ac.ebi.utils.threading"><code>PoolSizeTuner</code></a>, 
 in order to optimise the task throughput (i.e., the number of tasks that complete their execution in the unit of time).</p>

 <p>You should initialise this class with a moderate initial pool size (default is the number of available processors), 
 cause the tuning algorithm works well (i.e. converges) when it approaches the best value from the left.</p>
 
 <p>The <a href="http://codeidol.com/java/java-concurrency/Applying-Thread-Pools/Sizing-Thread-Pools/">theory</a> 
 says that the optimal number of threads is given by the number of available processors and the ratio 
 between task waiting time and real CPU consumption time. However things can be more complicated when task latencies
 depend on how much they communicate or interfere each other, for instance by hitting transactions on the same database.
 This is the rationale to base thread optimisation on live performance measurement.</p> 
 
 <dl><dt>date</dt><dd>8 Oct 2013</dd></dl></div>
<dl class="notes">
<dt>Author:</dt>
<dd>Marco Brandizi</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>protected class&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="BatchService.BatchServiceTuner.html" class="type-name-link" title="class in uk.ac.ebi.utils.threading">BatchService.BatchServiceTuner</a></code></div>
<div class="col-last even-row-color">
<div class="block">The custom <a href="PoolSizeTuner.html" title="class in uk.ac.ebi.utils.threading"><code>PoolSizeTuner</code></a> that is used to optimise this service.</div>
</div>
</div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>protected int</code></div>
<div class="col-second even-row-color"><code><a href="#lastExitCode" class="member-name-link">lastExitCode</a></code></div>
<div class="col-last even-row-color">
<div class="block">This should be 1 if there are multiple and different exit codes returned by submitted tasks <a href="BatchServiceTask.html#getExitCode()"><code>BatchServiceTask.getExitCode()</code></a>.</div>
</div>
<div class="col-first odd-row-color"><code>protected uk.org.lidalia.slf4jext.Logger</code></div>
<div class="col-second odd-row-color"><code><a href="#log" class="member-name-link">log</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected <a href="PoolSizeTuner.html" title="class in uk.ac.ebi.utils.threading">PoolSizeTuner</a></code></div>
<div class="col-second even-row-color"><code><a href="#poolSizeTuner" class="member-name-link">poolSizeTuner</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">BatchService</a>()</code></div>
<div class="col-last even-row-color">
<div class="block">Defaults to <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Runtime.html#availableProcessors()" title="class or interface in java.lang" class="external-link"><code>Runtime.getRuntime().availableProcessors()</code></a></div>
</div>
<div class="col-constructor-name odd-row-color"><code><a href="#%3Cinit%3E(int)" class="member-name-link">BatchService</a><wbr>(int&nbsp;initialThreadPoolSize)</code></div>
<div class="col-last odd-row-color">
<div class="block">Initialises a pool service with this number of initial threads.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#finalize()" class="member-name-link">finalize</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Stops <a href="#poolSizeTuner"><code>poolSizeTuner</code></a>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getBusyTasks()" class="member-name-link">getBusyTasks</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getCompletedTasks()" class="member-name-link">getCompletedTasks</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">The no of completed tasks.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getLastExitCode()" class="member-name-link">getLastExitCode</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="PoolSizeTuner.html" title="class in uk.ac.ebi.utils.threading">PoolSizeTuner</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getPoolSizeTuner()" class="member-name-link">getPoolSizeTuner</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Used to dynamically adjust the no.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>uk.org.lidalia.slf4jext.Level</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getSubmissionMsgLogLevel()" class="member-name-link">getSubmissionMsgLogLevel</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">The submission of a new task is notified to the logging system via this level (<code>Level.INFO</code> by default).</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getThreadPoolSize()" class="member-name-link">getThreadPoolSize</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="BatchService.html" title="class in uk.ac.ebi.utils.threading">BatchService</a>&lt;<a href="BatchService.html" title="type parameter in BatchService">TK</a>&gt;.<a href="BatchService.BatchServiceTuner.html" title="class in uk.ac.ebi.utils.threading">BatchServiceTuner</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#newPoolSizeTuner()" class="member-name-link">newPoolSizeTuner</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Allows you to initialise with a custom <code><a href="BatchService.html" title="class in uk.ac.ebi.utils.threading">BatchService</a>&lt;<a href="BatchService.html" title="type parameter in BatchService">TK</a> extends <a href="BatchServiceTask.html" title="class in uk.ac.ebi.utils.threading">BatchServiceTask</a>&gt;.<a href="BatchService.BatchServiceTuner.html" title="class in uk.ac.ebi.utils.threading">BatchServiceTuner</a></code>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ExecutorService.html" title="class or interface in java.util.concurrent" class="external-link">ExecutorService</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#newThreadPoolExecutor(int)" class="member-name-link">newThreadPoolExecutor</a><wbr>(int&nbsp;initialThreadPoolSize)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Allows you to initialise with a custom <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ExecutorService.html" title="class or interface in java.util.concurrent" class="external-link"><code>ExecutorService</code></a>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setSubmissionMsgLogLevel(uk.org.lidalia.slf4jext.Level)" class="member-name-link">setSubmissionMsgLogLevel</a><wbr>(uk.org.lidalia.slf4jext.Level&nbsp;submissionMsgLogLevel)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setThreadFactory(java.util.concurrent.ThreadFactory)" class="member-name-link">setThreadFactory</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ThreadFactory.html" title="class or interface in java.util.concurrent" class="external-link">ThreadFactory</a>&nbsp;threadFactory)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">It's like the <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ThreadPoolExecutor.html#setThreadFactory(java.util.concurrent.ThreadFactory)" title="class or interface in java.util.concurrent" class="external-link"><code>ThreadPoolExecutor.setThreadFactory(ThreadFactory)</code></a> and might be useful here as well.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setThreadPoolSize(int)" class="member-name-link">setThreadPoolSize</a><wbr>(int&nbsp;threadPoolSize)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#submit(TK)" class="member-name-link">submit</a><wbr>(<a href="BatchService.html" title="type parameter in BatchService">TK</a>&nbsp;batchServiceTask)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Submits a task into the pool, synchronising updates requested from <a href="#poolSizeTuner"><code>poolSizeTuner</code></a> and other internal 
 state information.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#waitAllFinished()" class="member-name-link">waitAllFinished</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This can be used after you have submitted all the tasks that you have to run, when you want to wait that all of them 
 complete their execution.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="lastExitCode">
<h3>lastExitCode</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">lastExitCode</span></div>
<div class="block">This should be 1 if there are multiple and different exit codes returned by submitted tasks <a href="BatchServiceTask.html#getExitCode()"><code>BatchServiceTask.getExitCode()</code></a>.
 It should be a given value if all the submitted tasks returned that same value and it is non-zero.
 Should be 0 in all other cases.</div>
</section>
</li>
<li>
<section class="detail" id="poolSizeTuner">
<h3>poolSizeTuner</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="PoolSizeTuner.html" title="class in uk.ac.ebi.utils.threading">PoolSizeTuner</a></span>&nbsp;<span class="element-name">poolSizeTuner</span></div>
</section>
</li>
<li>
<section class="detail" id="log">
<h3>log</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">uk.org.lidalia.slf4jext.Logger</span>&nbsp;<span class="element-name">log</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>BatchService</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">BatchService</span>()</div>
<div class="block">Defaults to <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Runtime.html#availableProcessors()" title="class or interface in java.lang" class="external-link"><code>Runtime.getRuntime().availableProcessors()</code></a></div>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(int)">
<h3>BatchService</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">BatchService</span><wbr><span class="parameters">(int&nbsp;initialThreadPoolSize)</span></div>
<div class="block">Initialises a pool service with this number of initial threads.</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="newPoolSizeTuner()">
<h3>newPoolSizeTuner</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="BatchService.html" title="class in uk.ac.ebi.utils.threading">BatchService</a>&lt;<a href="BatchService.html" title="type parameter in BatchService">TK</a>&gt;.<a href="BatchService.BatchServiceTuner.html" title="class in uk.ac.ebi.utils.threading">BatchServiceTuner</a></span>&nbsp;<span class="element-name">newPoolSizeTuner</span>()</div>
<div class="block">Allows you to initialise with a custom <code><a href="BatchService.html" title="class in uk.ac.ebi.utils.threading">BatchService</a>&lt;<a href="BatchService.html" title="type parameter in BatchService">TK</a> extends <a href="BatchServiceTask.html" title="class in uk.ac.ebi.utils.threading">BatchServiceTask</a>&gt;.<a href="BatchService.BatchServiceTuner.html" title="class in uk.ac.ebi.utils.threading">BatchServiceTuner</a></code>. In most cases you will be fine with the default. 
 If you need to change its tuning parameters, use the <a href="#poolSizeTuner"><code>poolSizeTuner</code></a> field.
 
 This is called by the <a href="#%3Cinit%3E(int)"><code>BatchService(int)</code></a> constructor (and all the others).</div>
</section>
</li>
<li>
<section class="detail" id="newThreadPoolExecutor(int)">
<h3>newThreadPoolExecutor</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ExecutorService.html" title="class or interface in java.util.concurrent" class="external-link">ExecutorService</a></span>&nbsp;<span class="element-name">newThreadPoolExecutor</span><wbr><span class="parameters">(int&nbsp;initialThreadPoolSize)</span></div>
<div class="block">Allows you to initialise with a custom <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ExecutorService.html" title="class or interface in java.util.concurrent" class="external-link"><code>ExecutorService</code></a>. WARNING: this class was designed and tested with
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/Executors.html#newFixedThreadPool(int)" title="class or interface in java.util.concurrent" class="external-link"><code>fixed pools</code></a> in mind. This method is supposed to instantiate variants
 of fixed thread pools, in other to accommodate specific needs. One example is when you need to give different 
 priorities to the tasks in a pool. We have <a href="BatchServiceTask.TaskComparator.html" title="class in uk.ac.ebi.utils.threading"><code>BatchServiceTask.TaskComparator</code></a> for that, which can be instantiated from this
 method this way (method inspired to <a href='http://tinyurl.com/jjktm53'>this</a>)): 
 
 <pre>
 return new ThreadPoolExecutor ( 
   initialThreadPoolSize, initialThreadPoolSize, 0L, TimeUnit.MILLISECONDS,
   new PriorityBlockingQueue<Runnable> ( initialThreadPoolSize, new BatchServiceTask.TaskComparator () )
 );
 </pre>
 
 Use executors other than fixed pool size at your own risk!</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>initialThreadPoolSize</code> - the initial thread pool size.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="submit(TK)">
<h3 id="submit(uk.ac.ebi.utils.threading.BatchServiceTask)">submit</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">submit</span><wbr><span class="parameters">(<a href="BatchService.html" title="type parameter in BatchService">TK</a>&nbsp;batchServiceTask)</span></div>
<div class="block">Submits a task into the pool, synchronising updates requested from <a href="#poolSizeTuner"><code>poolSizeTuner</code></a> and other internal 
 state information.</div>
</section>
</li>
<li>
<section class="detail" id="waitAllFinished()">
<h3>waitAllFinished</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">waitAllFinished</span>()</div>
<div class="block">This can be used after you have submitted all the tasks that you have to run, when you want to wait that all of them 
 complete their execution. The method starts a <code>timer</code> that reports the current state (with INFO log messages).</div>
</section>
</li>
<li>
<section class="detail" id="getCompletedTasks()">
<h3>getCompletedTasks</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getCompletedTasks</span>()</div>
<div class="block">The no of completed tasks. This method is not synchronised, so you might get a number slightly lower than the real
 one.</div>
</section>
</li>
<li>
<section class="detail" id="getPoolSizeTuner()">
<h3>getPoolSizeTuner</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="PoolSizeTuner.html" title="class in uk.ac.ebi.utils.threading">PoolSizeTuner</a></span>&nbsp;<span class="element-name">getPoolSizeTuner</span>()</div>
<div class="block">Used to dynamically adjust the no. threads that the service runs in parallel. Most cases you will be fine with 
 the <a href="BatchService.BatchServiceTuner.html" title="class in uk.ac.ebi.utils.threading"><code>default implementation of this</code></a>. If not, you should set this field in a  
 <code>constructor</code>.</div>
</section>
</li>
<li>
<section class="detail" id="getThreadPoolSize()">
<h3>getThreadPoolSize</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getThreadPoolSize</span>()</div>
</section>
</li>
<li>
<section class="detail" id="setThreadPoolSize(int)">
<h3>setThreadPoolSize</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setThreadPoolSize</span><wbr><span class="parameters">(int&nbsp;threadPoolSize)</span></div>
</section>
</li>
<li>
<section class="detail" id="getLastExitCode()">
<h3>getLastExitCode</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getLastExitCode</span>()</div>
</section>
</li>
<li>
<section class="detail" id="getBusyTasks()">
<h3>getBusyTasks</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getBusyTasks</span>()</div>
</section>
</li>
<li>
<section class="detail" id="getSubmissionMsgLogLevel()">
<h3>getSubmissionMsgLogLevel</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">uk.org.lidalia.slf4jext.Level</span>&nbsp;<span class="element-name">getSubmissionMsgLogLevel</span>()</div>
<div class="block">The submission of a new task is notified to the logging system via this level (<code>Level.INFO</code> by default).
 
 If your application has very many tasks and you don't want to get bothered with these messages, you can 
 change the log granularity here. If the level you set is disabled, this class will instead log 
 a <code>notification</code> from time to time.</div>
</section>
</li>
<li>
<section class="detail" id="setSubmissionMsgLogLevel(uk.org.lidalia.slf4jext.Level)">
<h3>setSubmissionMsgLogLevel</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setSubmissionMsgLogLevel</span><wbr><span class="parameters">(uk.org.lidalia.slf4jext.Level&nbsp;submissionMsgLogLevel)</span></div>
</section>
</li>
<li>
<section class="detail" id="setThreadFactory(java.util.concurrent.ThreadFactory)">
<h3>setThreadFactory</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setThreadFactory</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ThreadFactory.html" title="class or interface in java.util.concurrent" class="external-link">ThreadFactory</a>&nbsp;threadFactory)</span></div>
<div class="block">It's like the <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ThreadPoolExecutor.html#setThreadFactory(java.util.concurrent.ThreadFactory)" title="class or interface in java.util.concurrent" class="external-link"><code>ThreadPoolExecutor.setThreadFactory(ThreadFactory)</code></a> and might be useful here as well.</div>
</section>
</li>
<li>
<section class="detail" id="finalize()">
<h3>finalize</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">finalize</span>()
                 throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a></span></div>
<div class="block">Stops <a href="#poolSizeTuner"><code>poolSizeTuner</code></a>.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html" title="class or interface in java.lang" class="external-link">Throwable</a></code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2024. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
